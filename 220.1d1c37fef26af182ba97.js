(self.webpackChunknodenet=self.webpackChunknodenet||[]).push([[220],{6220:(e,t,s)=>{"use strict";s.r(t),s.d(t,{UserProfileModule:()=>x});var i=s(1116),n=s(2006),r=s(6304),o=s(7812),u=s(5351),a=s(5366),l=s(2255),c=s(8845);function p(e,t){if(1&e&&(a.TgZ(0,"p"),a._uU(1),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.hij("",e.visitingUserData.posts.length," post ")}}function g(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",15),a.TgZ(1,"div",16),a.TgZ(2,"img",17),a.NdJ("click",function(){const t=a.CHM(e).$implicit;return a.oxw(3).onView(t._id)}),a.qZA(),a.qZA(),a.qZA()}if(2&e){const e=t.$implicit,s=a.oxw(3);a.xp6(2),a.hYB("src","",s.serverDir,"",e.imgUrl,"",a.LSH)}}function d(e,t){if(1&e&&(a.TgZ(0,"div",13),a.YNc(1,g,3,2,"div",14),a.qZA()),2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngForOf",e.visitingUserData.posts)}}function f(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"div",1),a.TgZ(1,"div",2),a.TgZ(2,"div",3),a._UZ(3,"img",4),a.qZA(),a.TgZ(4,"div",5),a.TgZ(5,"div",6),a.TgZ(6,"span",7),a._uU(7),a.qZA(),a.TgZ(8,"p",8),a.NdJ("click",function(){a.CHM(e);const t=a.oxw();return t.onFollowUnfollow(t.user.followings.includes(t.visitingUserData.user._id)?"unfollow":"follow",t.visitingUserData.user._id)}),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"div",9),a.YNc(11,p,2,1,"p",10),a.TgZ(12,"p"),a._uU(13),a.qZA(),a.TgZ(14,"p"),a._uU(15),a.qZA(),a.qZA(),a.TgZ(16,"div",11),a.TgZ(17,"p"),a._uU(18),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a._UZ(19,"hr"),a.YNc(20,d,2,1,"div",12),a.qZA()}if(2&e){const e=a.oxw();a.xp6(3),a.Q6J("src",e.userImage,a.LSH),a.xp6(4),a.Oqu(e.visitingUserData.user.username),a.xp6(2),a.Oqu(e.user.followings.includes(e.visitingUserData.user._id)?"Unfollow":"Follow"),a.xp6(2),a.Q6J("ngIf",e.visitingUserData.posts),a.xp6(2),a.hij("",e.visitingUserData.user.followers.length," followers"),a.xp6(2),a.hij("",e.visitingUserData.user.followings.length," following"),a.xp6(3),a.Oqu(e.visitingUserData.user.bio),a.xp6(2),a.Q6J("ngIf",e.visitingUserData.posts)}}const _=[{path:":id/view",component:(()=>{class e{constructor(e,t,s,i){this.route=e,this.dataStorageService=t,this.authService=s,this.router=i}ngOnInit(){var e=this;return(0,r.Z)(function*(){e.serverDir=u.N.IMAGES_PATH,e.route.params.subscribe(t=>{e.shownUserId=t.id}),e.userSubscription=e.authService.user.subscribe(t=>{e.user=t}),e.visitingUserData=yield e.dataStorageService.fetchUserWithPosts(e.shownUserId),e.userImage=""===e.visitingUserData.user.profilePicture||"assets/defaultProfile.png"===e.visitingUserData.user.profilePicture?"assets/defaultProfile.png":e.serverDir+e.visitingUserData.user.profilePicture})()}onFollowUnfollow(e,t){const s=localStorage.getItem("token");"follow"===e&&this.dataStorageService.followUser(t).subscribe(e=>{const t=new o.n(this.user._id,this.user.email,this.user.username,this.user.profilePicture,this.user.phoneNumber,this.user.bio,this.user.followers,e,this.user.posts,this.user.createdAt,this.user.updatedAt,s);this.authService.user.next(t),this.visitingUserData.user.followers.push(this.user._id)}),"unfollow"===e&&this.dataStorageService.unfollowUser(t).subscribe(e=>{const t=new o.n(this.user._id,this.user.email,this.user.username,this.user.profilePicture,this.user.phoneNumber,this.user.bio,this.user.followers,e,this.user.posts,this.user.createdAt,this.user.updatedAt,s);this.authService.user.next(t),this.visitingUserData.user.followers.splice(this.visitingUserData.user.followers.indexOf(this.user._id))})}onView(e){this.router.navigate(["/post",e,"view"])}ngOnDestroy(){this.userSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(n.gz),a.Y36(l.Z),a.Y36(c.e),a.Y36(n.F0))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-user-profile"]],decls:1,vars:1,consts:[["class","user__wrapper",4,"ngIf"],[1,"user__wrapper"],[1,"user__details"],[1,"user__detailsRight"],["alt","",2,"height","200px","width","200px","border-radius","50%",3,"src"],[1,"user__detailsLeft"],[1,"detailsLeft__top"],[1,"username"],[1,"follow__button",3,"click"],[1,"detailsLeft__center"],[4,"ngIf"],[1,"detailsLeft__bottom"],["class","user__postList",4,"ngIf"],[1,"user__postList"],["class","user__post",4,"ngFor","ngForOf"],[1,"user__post"],[1,"image__box"],["id","image__previewed","alt","",3,"src","click"]],template:function(e,t){1&e&&a.YNc(0,f,21,8,"div",0),2&e&&a.Q6J("ngIf",t.visitingUserData)},directives:[i.O5,i.sg],styles:[".user__wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:800px}.user__details[_ngcontent-%COMP%]{display:flex}.user__detailsRight[_ngcontent-%COMP%]{padding:50px}.user__detailsLeft[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:50px;width:100%}.detailsLeft__top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:30px}.follow__button[_ngcontent-%COMP%]{font-size:18px;color:#007fff;cursor:pointer;font-weight:500}.username[_ngcontent-%COMP%]{font-size:25px;font-weight:500;margin-right:100px}.detailsLeft__top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:17px}.detailsLeft__center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:65px}.detailsLeft__center[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.detailsLeft__bottom[_ngcontent-%COMP%]{margin-top:10px;font-size:16px;font-weight:600}.user__postList[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:20px 0 0 5px;height:100%}.user__post[_ngcontent-%COMP%]{padding-right:10px}.user__post[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid #d4d1d1}.image__box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:250px;height:250px;border:1px solid #ccc;margin-bottom:10px}#image__previewed[_ngcontent-%COMP%]{width:100%;height:100%;opacity:1;cursor:pointer}"]}),e})()}];let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[n.Bz.forChild(_)],n.Bz]}),e})();var w=s(3128);let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[i.ez,h,w.q]]}),e})()}}]);