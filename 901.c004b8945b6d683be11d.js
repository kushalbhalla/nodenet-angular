(self.webpackChunknodenet=self.webpackChunknodenet||[]).push([[901],{9901:(e,t,i)=>{"use strict";i.r(t),i.d(t,{UserProfileModule:()=>Z});var s=i(1116),n=i(2006),r=i(6304),o=i(7812),a=i(1267),u=i(5366),l=i(2255),p=i(8845),c=i(9410);function g(e,t){1&e&&u._UZ(0,"app-loading-spinner")}function d(e,t){if(1&e&&(u.TgZ(0,"p"),u._uU(1),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.hij("",e.visitingUserData.posts.length," post ")}}function f(e,t){1&e&&u._UZ(0,"app-loading-spinner")}function _(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",15),u.TgZ(1,"div",16),u.TgZ(2,"img",17),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw(3).onView(t._id)}),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=t.$implicit,i=u.oxw(3);u.xp6(2),u.hYB("src","",i.serverDir,"",e.imgUrl,"",u.LSH)}}function h(e,t){if(1&e&&(u.TgZ(0,"div",13),u.YNc(1,_,3,2,"div",14),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("ngForOf",e.visitingUserData.posts)}}function w(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",2),u.TgZ(1,"div",3),u.TgZ(2,"div",4),u._UZ(3,"img",5),u.qZA(),u.TgZ(4,"div",6),u.TgZ(5,"div",7),u.TgZ(6,"span",8),u._uU(7),u.qZA(),u.TgZ(8,"p",9),u.NdJ("click",function(){u.CHM(e);const t=u.oxw();return t.onFollowUnfollow(t.user.followings.includes(t.visitingUserData.user._id)?"unfollow":"follow",t.visitingUserData.user._id)}),u._uU(9),u.qZA(),u.qZA(),u.TgZ(10,"div",10),u.YNc(11,d,2,1,"p",0),u.TgZ(12,"p"),u._uU(13),u.qZA(),u.TgZ(14,"p"),u._uU(15),u.qZA(),u.qZA(),u.TgZ(16,"div",11),u.TgZ(17,"p"),u._uU(18),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u._UZ(19,"hr"),u.YNc(20,f,1,0,"app-loading-spinner",0),u.YNc(21,h,2,1,"div",12),u.qZA()}if(2&e){const e=u.oxw();u.xp6(3),u.Q6J("src",e.userImage,u.LSH),u.xp6(4),u.Oqu(e.visitingUserData.user.username),u.xp6(2),u.Oqu(e.user.followings.includes(e.visitingUserData.user._id)?"Unfollow":"Follow"),u.xp6(2),u.Q6J("ngIf",e.visitingUserData.posts),u.xp6(2),u.hij("",e.visitingUserData.user.followers.length," followers"),u.xp6(2),u.hij("",e.visitingUserData.user.followings.length," following"),u.xp6(3),u.Oqu(e.visitingUserData.user.bio),u.xp6(2),u.Q6J("ngIf",!e.visitingUserData.posts),u.xp6(1),u.Q6J("ngIf",e.visitingUserData.posts)}}const x=[{path:":id/view",component:(()=>{class e{constructor(e,t,i,s){this.route=e,this.dataStorageService=t,this.authService=i,this.router=s}ngOnInit(){var e=this;return(0,r.Z)(function*(){e.serverDir=a.N.IMAGES_PATH,e.route.params.subscribe(t=>{e.shownUserId=t.id}),e.userSubscription=e.authService.user.subscribe(t=>{e.user=t}),e.visitingUserData=yield e.dataStorageService.fetchUserWithPosts(e.shownUserId),e.userImage=""===e.visitingUserData.user.profilePicture||"assets/defaultProfile.png"===e.visitingUserData.user.profilePicture?"assets/defaultProfile.png":e.serverDir+e.visitingUserData.user.profilePicture})()}onFollowUnfollow(e,t){const i=localStorage.getItem("token");"follow"===e&&this.dataStorageService.followUser(t).subscribe(e=>{const t=new o.n(this.user._id,this.user.email,this.user.username,this.user.profilePicture,this.user.phoneNumber,this.user.bio,this.user.followers,e,this.user.posts,this.user.createdAt,this.user.updatedAt,i);this.authService.user.next(t),this.visitingUserData.user.followers.push(this.user._id)}),"unfollow"===e&&this.dataStorageService.unfollowUser(t).subscribe(e=>{const t=new o.n(this.user._id,this.user.email,this.user.username,this.user.profilePicture,this.user.phoneNumber,this.user.bio,this.user.followers,e,this.user.posts,this.user.createdAt,this.user.updatedAt,i);this.authService.user.next(t),this.visitingUserData.user.followers.splice(this.visitingUserData.user.followers.indexOf(this.user._id))})}onView(e){this.router.navigate(["/post",e,"view"])}ngOnDestroy(){this.userSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(n.gz),u.Y36(l.Z),u.Y36(p.e),u.Y36(n.F0))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-user-profile"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","user__wrapper",4,"ngIf"],[1,"user__wrapper"],[1,"user__details"],[1,"user__detailsRight"],["alt","",2,"height","200px","width","200px","border-radius","50%",3,"src"],[1,"user__detailsLeft"],[1,"detailsLeft__top"],[1,"username"],[1,"follow__button",3,"click"],[1,"detailsLeft__center"],[1,"detailsLeft__bottom"],["class","user__postList",4,"ngIf"],[1,"user__postList"],["class","user__post",4,"ngFor","ngForOf"],[1,"user__post"],[1,"image__box"],["id","image__previewed","alt","",3,"src","click"]],template:function(e,t){1&e&&(u.YNc(0,g,1,0,"app-loading-spinner",0),u.YNc(1,w,22,9,"div",1)),2&e&&(u.Q6J("ngIf",!t.visitingUserData),u.xp6(1),u.Q6J("ngIf",t.visitingUserData))},directives:[s.O5,c.g,s.sg],styles:[".user__wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:800px}.user__details[_ngcontent-%COMP%]{display:flex}.user__detailsRight[_ngcontent-%COMP%]{padding:50px}.user__detailsLeft[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:50px;width:100%}.detailsLeft__top[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:30px}.follow__button[_ngcontent-%COMP%]{font-size:18px;color:#007fff;cursor:pointer;font-weight:500}.username[_ngcontent-%COMP%]{font-size:25px;font-weight:500;margin-right:100px}.detailsLeft__top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:17px}.detailsLeft__center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:65px}.detailsLeft__center[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.detailsLeft__bottom[_ngcontent-%COMP%]{margin-top:10px;font-size:16px;font-weight:600}.user__postList[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;padding:20px 0 0 5px;height:100%}.user__post[_ngcontent-%COMP%]{padding-right:10px}.user__post[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid #d4d1d1}.image__box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:250px;height:250px;border:1px solid #ccc;margin-bottom:10px}#image__previewed[_ngcontent-%COMP%]{width:100%;height:100%;opacity:1;cursor:pointer}"]}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[n.Bz.forChild(x)],n.Bz]}),e})();var m=i(3128),U=i(5425);let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[s.ez,v,m.q,U.m]]}),e})()}}]);