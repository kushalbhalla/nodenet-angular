(self.webpackChunknodenet=self.webpackChunknodenet||[]).push([[978],{8978:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MainModule:()=>J});var s=i(1116),n=i(3128),r=i(2693),o=i(1041),c=i(5425),p=i(2006),a=i(5366),g=i(2255),u=i(8845),h=i(8903),l=i(9410),f=i(1267),d=i(7307),_=i(9624),m=i(2797),x=i(4369);let b=(()=>{class t{constructor(t,e,i,s,n,r){this.matIconRegistry=t,this.domSanitizer=e,this.dataStorageService=i,this.mainService=s,this.router=n,this.authService=r,this.matIconRegistry.addSvgIcon("more_vert",this.domSanitizer.bypassSecurityTrustResourceUrl("../../../assets/icons/more_vert.svg"))}ngOnInit(){const t=this.timeSince(new Date(this.post.createdAt).getTime()/1e3);this.post.createdAt=t,this.userSubscription=this.authService.user.subscribe(t=>{this.user=t,this.user&&(this.serverDir=f.N.IMAGES_PATH,this.postUserImage=""===this.postUser.profilePicture||"assets/defaultProfile.png"===this.postUser.profilePicture?"assets/defaultProfile.png":this.serverDir+this.postUser.profilePicture)})}goToUser(){this.router.navigate(this.user._id===this.post.creator?["/account"]:["user-profile",this.post.creator,"view"])}updatePostLikes(){this.dataStorageService.likePost(this.post._id).subscribe(t=>{this.post.likes=t.likes,this.mainService.updatePost(this.index,this.post)})}timeSince(t){var e=Math.floor((new Date).getTime()/1e3-t),i=Math.floor(e/31536e3);return i>1?i+" year":(i=Math.floor(e/2592e3))>1?i+" month":(i=Math.floor(e/86400))>=1?i+" day":(i=Math.floor(e/3600))>=1?i+" hour":(i=Math.floor(e/60))>1?i+" minute":Math.floor(e)+" second"}ngOnDestroy(){this.userSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(d.jv),a.Y36(_.H7),a.Y36(g.Z),a.Y36(h.J),a.Y36(p.F0),a.Y36(u.e))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-post"]],inputs:{post:"post",postUser:"postUser",index:"index"},decls:23,vars:7,consts:[[1,"post__wrapper"],[1,"post__card"],[1,"postTop"],[1,"postTopLeft"],["mat-flat-button","",2,"background-color","inherit",3,"click"],["alt","",1,"postProfileImg",3,"src"],[1,"postUsername"],[1,"postDate"],[1,"postTopRight"],["mat-icon-button",""],["svgIcon","more_vert"],[1,"postCenter"],[1,"postText"],["alt","",1,"postImg",3,"src"],[1,"postBottom"],[1,"postBottomLeft"],["mat-icon-button","",3,"click"],["src","assets/like.png","alt","",1,"likeIcon"],[1,"postLikeCounter"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"mat-card",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"button",4),a.NdJ("click",function(){return e.goToUser()}),a._UZ(5,"img",5),a.TgZ(6,"span",6),a._uU(7),a.qZA(),a.qZA(),a.TgZ(8,"span",7),a._uU(9),a.qZA(),a.qZA(),a.TgZ(10,"div",8),a.TgZ(11,"button",9),a._UZ(12,"mat-icon",10),a.qZA(),a.qZA(),a.qZA(),a.TgZ(13,"div",11),a.TgZ(14,"span",12),a._uU(15),a.qZA(),a._UZ(16,"img",13),a.qZA(),a.TgZ(17,"div",14),a.TgZ(18,"div",15),a.TgZ(19,"button",16),a.NdJ("click",function(){return e.updatePostLikes()}),a._UZ(20,"img",17),a.qZA(),a.TgZ(21,"span",18),a._uU(22),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t&&(a.xp6(5),a.Q6J("src",e.postUserImage,a.LSH),a.xp6(2),a.hij(" ",e.postUser.username," "),a.xp6(2),a.hij("",e.post.createdAt," ago"),a.xp6(6),a.Oqu(e.post.description),a.xp6(1),a.hYB("src","",e.serverDir,"",e.post.imgUrl,"",a.LSH),a.xp6(6),a.hij("",e.post.likes.length," liked"))},directives:[m.a8,x.lW,d.Hw],styles:[".post__wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:600px}.post__card[_ngcontent-%COMP%]{margin-bottom:30px}.postTop[_ngcontent-%COMP%]{justify-content:space-between}.postTop[_ngcontent-%COMP%], .postTopLeft[_ngcontent-%COMP%]{display:flex;align-items:center}.postProfileImg[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;object-fit:cover}.postUsername[_ngcontent-%COMP%]{font-size:15px;font-weight:500;margin:0 10px}.postDate[_ngcontent-%COMP%]{font-size:12px}.postCenter[_ngcontent-%COMP%]{margin:20px 0}.postImg[_ngcontent-%COMP%]{margin-top:20px;max-width:100%;max-height:500px;object-fit:contain}.postBottom[_ngcontent-%COMP%]{justify-content:space-between}.postBottom[_ngcontent-%COMP%], .postBottomLeft[_ngcontent-%COMP%]{display:flex;align-items:center}.likeIcon[_ngcontent-%COMP%]{width:24px;height:24px;cursor:pointer}.postLikeCounter[_ngcontent-%COMP%]{font-size:15px;padding-left:20px}.postCommentText[_ngcontent-%COMP%]{cursor:pointer;border-bottom:1px dashed gray;font-size:15px}"]}),t})();function Z(t,e){if(1&t&&a._UZ(0,"app-post",5),2&t){const t=e.$implicit,i=e.index;a.Q6J("post",t.post)("postUser",t.user)("index",i)}}function v(t,e){if(1&t&&(a.TgZ(0,"div",3),a.YNc(1,Z,1,3,"app-post",4),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngForOf",t.posts)}}let P=(()=>{class t{constructor(t){this.mainService=t}ngOnInit(){this.subscription=this.mainService.postsChanged.subscribe(t=>{this.posts=t}),this.posts=this.mainService.getPosts()}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(h.J))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-feed"]],decls:3,vars:1,consts:[[1,"feed__wrapper"],[1,"feed__container"],["class","post",4,"ngIf"],[1,"post"],[3,"post","postUser","index",4,"ngFor","ngForOf"],[3,"post","postUser","index"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.YNc(2,v,2,1,"div",2),a.qZA(),a.qZA()),2&t&&(a.xp6(2),a.Q6J("ngIf",e.posts))},directives:[s.O5,s.sg,b],styles:[".feed__wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}.feed__container[_ngcontent-%COMP%]{height:100%;width:100%}@media (max-width:1000px){.feed__wrapper[_ngcontent-%COMP%]{justify-content:center;flex-direction:row;border:none}}.post[_ngcontent-%COMP%]{height:100%;margin:2rem 2rem 4rem}"]}),t})();var O=i(7812);function w(t,e){1&t&&a._UZ(0,"img",15)}function M(t,e){if(1&t&&a._UZ(0,"img",16),2&t){const t=a.oxw().$implicit,e=a.oxw(2);a.hYB("src","",e.serverDir,"",t.profilePicture,"",a.LSH)}}function C(t,e){if(1&t){const t=a.EpF();a.TgZ(0,"div",9),a.TgZ(1,"div",10),a.TgZ(2,"div",11),a.YNc(3,w,1,0,"img",12),a.YNc(4,M,1,2,"img",13),a.TgZ(5,"span",5),a._uU(6),a.qZA(),a.qZA(),a.TgZ(7,"button",14),a.NdJ("click",function(){const e=a.CHM(t).$implicit;return a.oxw(2).onFollow(e._id)}),a._uU(8,"Follow"),a.qZA(),a.qZA(),a.qZA()}if(2&t){const t=e.$implicit;a.xp6(3),a.Q6J("ngIf",""===t.profilePicture),a.xp6(1),a.Q6J("ngIf",""!==t.profilePicture),a.xp6(2),a.hij(" ",t.username," ")}}function S(t,e){if(1&t&&(a.TgZ(0,"div",2),a.TgZ(1,"div",3),a._UZ(2,"img",4),a.TgZ(3,"span",5),a._uU(4),a.qZA(),a.qZA(),a._UZ(5,"hr",6),a.TgZ(6,"span",7),a._uU(7," Some suggestions for you "),a.qZA(),a.YNc(8,C,9,3,"div",8),a.qZA()),2&t){const t=a.oxw();a.xp6(2),a.Q6J("src",t.userImage,a.LSH),a.xp6(2),a.hij(" ",t.user.username," "),a.xp6(4),a.Q6J("ngForOf",t.users)}}let T=(()=>{class t{constructor(t,e){this.authService=t,this.dataStorageService=e}ngOnInit(){this.serverDir=f.N.IMAGES_PATH,this.userSubscription=this.authService.user.subscribe(t=>{this.user=t,this.user&&(this.userImage=""===this.user.profilePicture||"assets/defaultProfile.png"===this.user.profilePicture?"assets/defaultProfile.png":this.serverDir+this.user.profilePicture,this.dataStorageService.fetchUserSuggestion().subscribe(t=>{this.users=t}))})}onFollow(t){const e=localStorage.getItem("token");this.dataStorageService.followUser(t).subscribe(t=>{console.log(t);const i=new O.n(this.user._id,this.user.email,this.user.username,this.user.profilePicture,this.user.phoneNumber,this.user.bio,this.user.followers,t,this.user.posts,this.user.createdAt,this.user.updatedAt,e);this.authService.user.next(i)})}ngOnDestroy(){this.userSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(u.e),a.Y36(g.Z))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-rightbar"]],decls:2,vars:1,consts:[[1,"rightbar__wrapper"],["class","rightbar__container",4,"ngIf"],[1,"rightbar__container"],[1,"user__profile"],["alt","",1,"user__profileImg",3,"src"],[1,"username"],[1,"rightbar__hr"],[1,"suggestions"],["class","rightbar__list",4,"ngFor","ngForOf"],[1,"rightbar__list"],[1,"user__index"],[1,"user__info"],["class","userImg","src","assets/defaultProfile.png","alt","",4,"ngIf"],["class","userImg","alt","",3,"src",4,"ngIf"],["mat-button","",1,"follow__button",3,"click"],["src","assets/defaultProfile.png","alt","",1,"userImg"],["alt","",1,"userImg",3,"src"]],template:function(t,e){1&t&&(a.TgZ(0,"div",0),a.YNc(1,S,9,3,"div",1),a.qZA()),2&t&&(a.xp6(1),a.Q6J("ngIf",e.users&&e.user))},directives:[s.O5,s.sg,x.lW],styles:[".rightbar__wrapper[_ngcontent-%COMP%]{display:flex;border-left:1px solid #c0bcbc}.rightbar__container[_ngcontent-%COMP%]{height:100%;width:300px;margin:2rem 0 4rem 2rem}.user__profile[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;margin-bottom:20px}.user__profileImg[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:50%;margin-bottom:30px}.username[_ngcontent-%COMP%]{font-size:25px;font-weight:500;margin-bottom:10px}.rightbar__hr[_ngcontent-%COMP%]{border:none;height:2px;background:grey;margin-bottom:20px}.suggestions[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.rightbar__list[_ngcontent-%COMP%]{flex-direction:column}.rightbar__list[_ngcontent-%COMP%], .user__index[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.user__index[_ngcontent-%COMP%]{justify-content:space-between;margin-top:20px}.user__info[_ngcontent-%COMP%]{display:flex;align-items:center}.userImg[_ngcontent-%COMP%]{height:45px;width:45px;border-radius:50%}.user__info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px;font-size:16px;font-weight:400}.follow__button[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#007fff}"]}),t})();function I(t,e){1&t&&a._UZ(0,"app-loading-spinner")}function A(t,e){1&t&&(a.TgZ(0,"div",6),a.TgZ(1,"p"),a._uU(2,"Please create some post and follow some people here."),a.qZA(),a.qZA())}function y(t,e){1&t&&(a.TgZ(0,"div",7),a._UZ(1,"app-feed"),a.qZA())}function U(t,e){1&t&&(a.TgZ(0,"div",8),a._UZ(1,"app-rightbar"),a.qZA())}function q(t,e){if(1&t&&(a.TgZ(0,"div",2),a.YNc(1,A,3,0,"div",3),a.YNc(2,y,2,0,"div",4),a.YNc(3,U,2,0,"div",5),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.Q6J("ngIf",t.intro),a.xp6(1),a.Q6J("ngIf",!t.intro),a.xp6(1),a.Q6J("ngIf",!t.intro)}}const k=[{path:"",redirectTo:"home"},{path:"home",component:(()=>{class t{constructor(t,e,i){this.dataStorageService=t,this.authService=e,this.mainService=i,this.intro=!0,this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.userSubscription=this.authService.user.subscribe(t=>{t&&(this.mainService.userId=t._id,this.dataStorageService.fetchTimelines().subscribe(t=>{this.isLoading=!1,this.intro=this.mainService.getHomeInfo()}))})}ngOnDestroy(){this.userSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(g.Z),a.Y36(u.e),a.Y36(h.J))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-main"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","main__container",4,"ngIf"],[1,"main__container"],["class","empty__container",4,"ngIf"],["class","feed",4,"ngIf"],["class","rightbar",4,"ngIf"],[1,"empty__container"],[1,"feed"],[1,"rightbar"]],template:function(t,e){1&t&&(a.YNc(0,I,1,0,"app-loading-spinner",0),a.YNc(1,q,4,3,"div",1)),2&t&&(a.Q6J("ngIf",e.isLoading),a.xp6(1),a.Q6J("ngIf",!e.isLoading))},directives:[s.O5,l.g,P,T],styles:[".main__container[_ngcontent-%COMP%]{display:flex;width:100%}.feed[_ngcontent-%COMP%]{flex:7.5}.empty__container[_ngcontent-%COMP%]{margin-top:50%;font-size:20px;font-weight:500;margin-right:20px}.rightbar[_ngcontent-%COMP%]{flex:4.5}@media (max-width:1000px){.rightbar[_ngcontent-%COMP%]{display:none}.feed[_ngcontent-%COMP%]{flex:1}}"]}),t})()}];let Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[p.Bz.forChild(k)],p.Bz]}),t})(),J=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[s.ez,Y,n.q,r.JF,o.UX,c.m]]}),t})()}}]);